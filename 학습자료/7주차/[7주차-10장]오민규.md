## 10.3 Criteria

Criteria ì¿¼ë¦¬ëŠ” JPQLì„ ìë°” ì½”ë“œë¡œ ì‘ì„±í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” ë¹Œë” í´ë˜ìŠ¤ APIë‹¤.

ë¬¸ìê°€ ì•„ë‹Œ ì½”ë“œë¡œ JPQLì„ ì‘ì„±í•˜ë¯€ë¡œ ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì¡ì„ ìˆ˜ ìˆê³  ë¬¸ìê¸°ë°˜ì˜ JPQlë³´ë‹¤ ë™ì  ì¿¼ë¦¬ë¥¼ ì•ˆì „í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤. 

í•˜ì§€ë§Œ ì½”ë“œê°€ ì¥í™©í•´ì„œ ì´í•´ê°€ í˜ë“¤ë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤. 

ëŒ€ë¶€ë¶„ì˜ ë‚´ìš©ì´ JPQLê³¼ ì¤‘ë³µ ë˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ë²• ìœ„ì£¼ë¡œ ì„¤ëª…í•œë‹¤.

### Criteria ê¸°ì´ˆ

Criteria APIëŠ” `javax.persistance.criteria` íŒ¨í‚¤ì§€ì— ìˆë‹¤.

```java
//ëª¨ë“  íšŒì›ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•˜ëŠ” ë‹¨ìˆœí•œ JPQLì„ Criteriaë¡œ ì‘ì„±
//JPQL: select m from Memeber m

Criteriabuilder cb = em.getCriteriaBuilder();  //-- 1

//Criteria ìƒì„±, ë°˜í™˜ íƒ€ì… ì§€ì • -- 2
CriteriaQuery<Memeber> cq = cb.createQuery(Memeber.calss);
 
Root<Member> m = cq.from(Memebr.class); // FROM ì ˆ -- 3
cq.select(m); // SELECT ì ˆ -- 4

TypedQuery<Member> query = em.createQuery(cq);
Lsit<Member> members = query.getResultList();
```

1. Criteria ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ë ¤ë©´ ë¨¼ì € Criteria ë¹Œë”ë¥¼  ì–»ì–´ì•¼í•œë‹¤. Criteriaë¹Œë”ëŠ” EntityManagerë‚˜ EntityManagerFactoryì—ì„œ ì–»ì„ ìˆ˜ ìˆë‹¤.
2. Criteria ì¿¼ë¦¬ ë¹Œë”ì—ì„œ Criteria ì¿¼ë¦¬ë¥¼ ìƒì„±í•œë‹¤. ì´ë•Œ ë°˜í™˜ íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ìˆë‹¤.
3. FROMì ˆì„ ìƒì„±í•œë‹¤. ë°˜í™˜ëœ ê°’ mì€ Criteriaì—ì„œ ì‚¬ìš©í•˜ëŠ” íŠ¹ë³„í•œ ë³„ì¹­ì´ë‹¤. mì„ ì¡°íšŒì˜ ì‹œì‘ì ì´ë¼ëŠ” ì˜ë¯¸ë¡œ ì¿¼ë¦¬ ë£¨íŠ¸(Root)ë¼ í•œë‹¤.
4. SELECTì ˆì„ ìƒì„±í•œë‹¤.

ì´ë ‡ê²Œ Criteria ì¿¼ë¦¬ë¥¼ ì™„ì„±í•˜ê³  ë‚˜ë©´ ë‹¤ìŒ ìˆœì„œëŠ” JPQLê³¼ ê°™ë‹¤. 

em.createQuery(cq)ì— ì™„ì„±ëœ Criteriaì¿¼ë¦¬ë¥¼ ë„£ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

```java
//ê²€ìƒ‰ ì¡°ê±´ ì¶”ê°€
//JPQL
//select m from Memeber m
//where m.username = 'íšŒì›1'
//order by m.age desc

Criteriabuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Memeber> cq = cb.createQuery(Memeber.calss);
Root<Member> m = cq.from(Memebr.class);

// ê²€ìƒ‰ ì¡°ê±´ ì •ì˜  -- 1
Pridecate usernameEqual = cb.equal(m.get("username"), "íšŒì›1");

// ì •ë ¬ ì¡°ê±´ ì •ì˜ -- 2
javax.persistance.criteria.Order ageDesc = cb.desc(m.get("age"));

cq.select(m) -- 3
	.where(usernameEqual) // WHEREì ˆ
	.orderby(ageDesc); // ORDER BY ì ˆ ìƒì„±

TypedQuery<Member> query = em.createQuery(cq);
Lsit<Member> members = query.getResultList();
```

1. ê²€ìƒ‰ ì¡°ê±´ì„ ì •ì˜í•œ ë¶€ë¶„ì„ ë³´ë©´ m.get(â€usernameâ€)ìœ¼ë¡œ ë˜ì–´ ìˆëŠ”ë° mì€ íšŒì› ì—”í‹°í‹°ì˜ ë³„ì¹­ì´ë‹¤ .
ì´ê²ƒì€ JPQLì—ì„œ m.usernameê³¼ ê°™ì€í‘œí˜„ì´ë‹¤. ê·¸ë¦¬ê³  cb.equal(A, B)ëŠ” ì´ë¦„ ê·¸ëŒ€ë¡œ A = Bë¼ëŠ” ëœ»ì´ë‹¤. 
ë”°ë¼ì„œ cb.equal(m.get(â€usernameâ€), â€œíšŒì›1â€)ëŠ” JPQLì—ì„œ m.username = â€˜íšŒì›1â€™ê³¼ ê°™ì€ í‘œí˜„ì´ë‹¤.
2. ì •ë ¬ ì¡°ê±´ì„ ì •ì˜í•˜ëŠ” ì½”ë“œì¸ cd.desc(m.get(â€ageâ€))ëŠ” m.age descì™€ ê°™ì€ í‘œí˜„ì´ë‹¤. 
3. ë§Œë“¤ì–´ë‘” ì¡°ê±´ì„ where, orderByì— ë„£ì–´ì„œ ì›í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ìƒì„±í•œë‹¤.

CriteriaëŠ” ê²€ìƒ‰ ì¡°ê±´ë¶€í„° ì •ë ¬ê¹Œì§€ Criteria ë¹Œë”ë¥¼ ì‚¬ìš©í•´ì„œ ì½”ë“œë¥¼ ì™„ì„±í•œë‹¤.

> ì¿¼ë¦¬ ë£¨íŠ¸(Query Root)ì™€ ë³„ì¹­
> 
- Root<Member> m = cq.from(Member.class); ì—¬ê¸°ì„œ mì´ ì¿¼ë¦¬ ë£¨íŠ¸ì´ë‹¤.
- ì¿¼ë¦¬ë£¨íŠ¸ëŠ” ì¿¼ë¦¬ì˜ ì‹œì‘ì ì´ë‹¤.
- Criteriaì—ì„œ ì‚¬ìš©ë˜ëŠ” íŠ¹ë³„í•œ ë³„ì¹­ì´ë‹¤. JPQLì˜ ë³„ì¹­ì´ë¼ ìƒê°í•˜ë©´ ëœë‹¤.
- ë³„ì¹­ì€ ì—”í‹°í‹°ì—ë§Œ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤.

> Criteriaì˜ ê²½ë¡œ í‘œí˜„ì‹
> 
- m.get(â€usernameâ€)ëŠ” JPQLì˜ m.usernameê³¼ ê°™ë‹¤.
- m.get(â€teamâ€).get(â€nameâ€)ëŠ” JPQLì˜ m.team.nameê³¼ ê°™ë‹¤.

```java
//ìˆ«ì íƒ€ì… ê²€ìƒ‰ 
//select m from Memebr m
//where m.age > 10 order by m.age desc

Root<Member> m = cq.from(Member.class);

//íƒ€ì… ì •ë³´ í•„ìš”
Predicate ageGt = cb.greaterThan(m.<Integer>get("age"), 10);
//Predicate ageGt = cb.gt(m.<Integer>get("age"), 10); ì´ë ‡ê²Œë„ ê°€ëŠ¥

cq.select(m);
cq.where(ageGt);
cq.orderBy(cb.desc(m.get("age")));
```

m.get(â€ageâ€)ì—ì„œëŠ” â€œageâ€ì˜ íƒ€ì… ì •ë³´ë¥¼ ì•Œì§€ ëª»í•œë‹¤. ë”°ë¼ì„œ ì œë„¤ë¦­ìœ¼ë¡œ ë°˜í™˜ íƒ€ì… ì •ë³´ë¥¼ ëª…ì‹œí•´ì•¼í•œë‹¤. 

(ë³´í†µ Stringê³¼ ê°™ì€ ë¬¸ì íƒ€ì…ì€ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.) 

### Criteria ì¿¼ë¦¬ ìƒì„±

```java
public interface CriteriaBuilder{

	CriteriaQuery<Object> createQuery(); //ì¡°íšŒê°’ ë°˜í™˜ íƒ€ì…: Object
	//ì¡°íšŒ ê°’ ë°˜í™˜ íƒ€ì…: ì—”í‹°í‹°, ì„ë² ë””ë“œ íƒ€ì…, ê¸°íƒ€
	
	<T> CriteriaQuery<T> createQuery(Class<T> resultClass);

	CriteriaQuery<Tuple> createTupleQuery();// ì¡°íšŒê°’ ë°˜í™˜ íƒ€ì…: Tuple
	...
}
```

Criteria ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ë•Œ íŒŒë¼ë¯¸í„°ë¡œ ì¿¼ë¦¬ ê²°ê³¼ì— ëŒ€í•œ ë°˜í™˜ íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. 

ì˜ˆë¥¼ ë“¤ì–´ CriteriaQueryë¥¼ ìƒì„±í•  ë•Œ Member.Classë¥¼ ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ ì§€ì •í•˜ë©´ em.createQuery(cq)ì—ì„œ ë°˜í™˜ íƒ€ì…ì„ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. 

ë°˜í™˜ íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ ì—†ê±°ë‚˜ ë°˜í™˜ íƒ€ì…ì´ ë‘˜ ì´ìƒì´ë©´ íƒ€ì…ì„ ì§€ì •í•˜ì§€ ì•Šê³  Objectë¡œ ë°˜í™˜ ë°›ìœ¼ë©´ ëœë‹¤. 

ë¬¼ë¡  ë°˜í™˜ íƒ€ì…ì´ ë‘˜ ì´ìƒì´ë©´ Object[]ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í¸ë¦¬í•˜ë‹¤. 

### ì¡°íšŒ

```java
//SELECT ì ˆì„ ë§Œë“œëŠ” ì˜ˆì œ
// CriteriaQuery

public interface CriteriaQuery<T> extend AbstractQuery<T>{

	//í•œ ê±´ ì§€ì •
	CriteriaQuery<T> select(Selection<? extend T> selection);
	// ì˜ˆì‹œ: cq.select(m) 
	
	//ì—¬ëŸ¬ ê±´ ì§€ì •
	CriteriaQuery<T> multiselect(Selection<?>... selections);
	// ì˜ˆì‹œ: cq.multiselect(m.get("username"),m.get("age"));
	// ì˜ˆì‹œ:
	// CriteriaBuilder db = em.getCriteriaBuilder();
	// cq.select(cb.array(m.get("username"), m.get("age")));
	
	//ì—¬ëŸ¬ ê±´ ì§€ì •
	CriteriaQuery<T> multiselect(List<Selection<?>> selectionList);
	
}

```

### DISTINCT

distinctëŠ” select, multiselect ë‹¤ìŒì— distinct(true)ë¥¼ ì‚¬ìš©í•˜ë©´ëœë‹¤. 

`cq.multiselect(m.get(â€usenameâ€), m.get(â€ageâ€)).distinct(ture);` 

### NEW, construct()

JPQLì—ì„œ `select new ìƒì„±ì()` êµ¬ë¬¸ì„ Criteriaì—ì„œëŠ” cb.construct(í´ë˜ìŠ¤ íƒ€ì…, â€¦)ë¡œ ì‚¬ìš©í•œë‹¤.

`cq.select(cb.construct(MemberDTO.class, m.get(â€usernameâ€), m.get(â€ageâ€)));` 

JPQLì—ì„œëŠ” íŒ¨í‚¤ì§€ ëª…ì„ ë‹¤ ì ì–´ì£¼ì—ˆì§€ë§Œ CriteriaëŠ” ì½”ë“œë¥¼ ì§ì ‘ ë‹¤ë£¨ë¯€ë¡œ MemberDTO.classì²˜ëŸ¼ ê°„ëµí•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 

### íŠœí”Œ

CriteriaëŠ” Mapê³¼ ë¹„ìŠ·í•œ íŠœí”Œì´ë¼ëŠ” íŠ¹ë³„í•œ ë°˜í™˜ ê°ì²´ë¥¼ ì œê³µí•œë‹¤. 

íŠœí”Œì„ ì‚¬ìš©í•˜ë ¤ë©´ cb.createTupleQuery() ë˜ëŠ” cb.createQuery(Tuple.class)ë¡œ Criteriaë¥¼ ìƒì„±í•œë‹¤.

- íŠœí”Œì€ íŠœí”Œì˜ ê²€ìƒ‰ í‚¤ë¡œ ì‚¬ìš©í•  íŠœí”Œ ì „ìš© ë³„ì¹­ì„ í•„ìˆ˜ë¡œ í• ë‹¹ í•´ì•¼í•œë‹¤. alias() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
- ì„ ì–¸í•´ë‘” íŠœí”Œ ë³„ì¹­ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

íŠœí”Œì€ ì´ë¦„ ê¸°ë°˜ì´ë¯€ë¡œ ìˆœì„œ ê¸°ë°˜ì˜ Object[] ë³´ë‹¤ ì•ˆì „í•˜ë‹¤. ê·¸ë¦¬ê³  tuple.getElements() ê°™ì€ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ í˜„ì¬ íŠœí”Œì˜ ë³„ì¹­ê³¼ ìë°” íƒ€ì…ë„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

<aside>
ğŸ’¡ íŠœí”Œì— ë³„ì¹­ì„ ì¤€ë‹¤ê³  í•´ì„œ ì‹¤ì œ SQLë³„ì¹­ì´ ë‹¬ë¼ì§€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. íŠœí”Œì€ Mapê³¼ ë¹„ìŠ·í•œ êµ¬ì¡°ì—¬ì„œ ë³„ì¹­ì„ í‚¤ë¡œ ì‚¬ìš©í•œë‹¤.

</aside>

```java
//íŠœí”Œê³¼ ì—”í‹°í‹° ì¡°íšŒ
CriteriaQuery<Tuple> cq = cb.createTupleQuery();
Root<Member> m = cq.from(Member.class);
cq.select(cb.tuple( //cq.multiselect(...)ì™€ ê°™ì€ ê¸°ëŠ¥
	m.alias("m"),
	m.get("username").alias("username")
));

TypedQuery<Tuple> query = em.createQuery(cq);
List<Tuple> resultList = query.getResultList();
for(Tuple tuple : resultList){
	Member member = tuple.get("m", Member.class);
	String username = tuple.get("username", String.class);
}
```

### ì§‘í•©

> GROUP BY
> 

`cq.groupBy(m.get(â€teamâ€).get(â€nameâ€));`  ì€ JPQLì—ì„œ `group by m.team.name` ê³¼ ê°™ë‹¤.

> HAVING
> 

`having(cb.gt(minAge, 10))`ì€ JPQLì—ì„œ `having min(m.age) > 10` ê³¼ ê°™ë‹¤.

### ì •ë ¬

ì •ë ¬ ì¡°ê±´ë„ Criteria ë¹Œë”ë¥¼ í†µí•´ì„œ ìƒì„±í•œë‹¤.

cd.desc() ë˜ëŠ” cb.asc()ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

```java
cq.select(m)
	.where(ageGt)
	.orderBy(cb.desc(m.get("age"))); //JPQL: order by m.age desc
```

ì •ë ¬ APIëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ë˜ì–´ìˆë‹¤.

```java
CriteriaQuery<T> orderBy(Order... o);
CriteriaQuery<T> orderBy(List<Order>... o);
```

### ì¡°ì¸

ì¡°ì¸ì€ join() ë©”ì†Œë“œì™€ JoinType í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤. 

```java
/* 
JPQL
select m,t from Member m
inner join m.ream t
where t.name
*/

Root<Member> m = cq.from(Member.class);
//m.fetch("team", JoinType.LEFT) í˜ì¹˜ì¡°ì¸ ì‚¬ìš© ì‹œ(ì£¼ì˜ì‚¬í•­ì€ JPQLê³¼ ê°™ìŒ)
Join<Member, Team> t = m.join("team", JoinType.INNER); // ë‚´ë¶€ì¡°ì¸

cq.multiselect(m, t)
	.where(cb.equal(t.get("name"), "íŒ€A"))
```

ì¿¼ë¦¬ ë£¨íŠ¸ì—ì„œ ë°”ë¡œ m.join(â€teamâ€) ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í–ˆë‹¤. ê·¸ë¦¬ê³  ì¡°ì¸í•œ teamì— t ë¼ëŠ” ë³„ì¹­ì„ ì£¼ì—ˆë‹¤. ì—¬ê¸°ì„œëŠ” JoinType.INNERë¥¼ ì„¤ì •í•´ì„œ ë‚´ë¶€ ì¡°ì¸ì„ ì‚¬ìš©í–ˆë‹¤. ì°¸ê³ ë¡œ ì¡°ì¸ íƒ€ì…ì„ ìƒëµí•˜ë©´ ë‚´ë¶€ ì¡°ì¸ì„ ì‚¬ìš©í•œë‹¤. ì™¸ë¶€ì¡°ì¸ì€ Jointype.LEFTë¡œ ì„¤ì •í•˜ë©´ëœë‹¤.

### ì„œë¸Œì¿¼ë¦¬

> ê°„ë‹¨í•œ ì„œë¸Œ ì¿¼ë¦¬
> 

Subquery<Double> subQuery = mainQuery.subquery(Double.class);

ë©”ì¸ ì¿¼ë¦¬ ìƒì„± í›„ mainQuery.select(m).where(cb.get(m.<Integer>get(â€ageâ€), subQuery));

> ìƒí˜¸ê´€ë ¨ ì¿¼ë¦¬
> 

ì„œë¸Œ ì¿¼ë¦¬ì—ì„œ ë©”ì¸ ì¿¼ë¦¬ì˜ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë©”ì¸ ì¿¼ë¦¬ì—ì„œ ì‚¬ìš©í•œ ë³„ì¹­ì„ ì–»ì–´ì•¼ í•œë‹¤.

ì„œë¸Œ ì¿¼ë¦¬ëŠ” ë©”ì¸ ì¿¼ë¦¬ì˜ Rootë‚˜ Joinì„ í†µí•´ ìƒì„±ëœ ë³„ì¹­ì„ ë°›ì•„ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ìˆë‹¤.

`.where(cb.equal(subM.get(â€usernameâ€), m.get(â€usernameâ€)));` 

### INì‹

INì‹ì€ Criteria ë¹Œë”ì—ì„œ in(â€¦) ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤. 

```java
cq.select(m)
	.where(cb.in(m.get("username")))
		.value("íšŒì›1")
		.value("íšŒì›2");
```

### CASEì‹

CASE ì‹ì—ëŠ” selectCase() ë©”ì†Œë“œì™€ when(), otherwise() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤. 

```java
/* JPQL
select m.username,
	case when m.age>=60 then 600
			 when m.age<= then 500
			 else 1000
	end
from Member m

*/
cq.multiselect(
	m.get("username"),
	cb.selectCase()
		.when(cb.ge(m.<Integer>get("age"), 60), 600)
		.when(cb.ge(m.<Integer>get("age"), 15), 500)
)
```

### íŒŒë¼ë¯¸í„° ì •ì˜

JPQLì—ì„œ :PARAM1ì²˜ëŸ¼ íŒŒë¼ë¯¸í„°ë¥¼ ì •ì˜í–ˆë“¯ì´ Criteriaë„ íŒŒë¼ë¯¸í„°ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

```java
cq.select(m) // ì •ì˜
	.where(cb.equal(m.get("username"), cb.parameter(String.class, "usernameParam")));

List<Member> resultList = em.createQuery(cq)
	.setParameter("usernameParam", "íšŒì›1") // ë°”ì¸ë”©
```

cb.parameter(íƒ€ì…, íŒŒë¼ë¯¸í„° ì´ë¦„) ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ì •ì˜í–ˆë‹¤.

setPatameter(â€usernameParamâ€, â€œíšŒì›1â€)ì„ ì‚¬ìš©í•´ì„œ í•´ë‹¹ íŒŒë¼ë¯¸í„°ì— ì‚¬ìš©í•  ê°’ì„ ë°”ì¸ë”© í–ˆë‹¤.

### ë„¤ì´í‹°ë¸Œ í•¨ìˆ˜ í˜¸ì¶œ

ë„¤ì´í‹°ë¸Œ SQLí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ cb.function(â€¦)ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ëœë‹¤. 

```java
Root<Member> m = cq.from(Member.class);
Expression<Long> function = cb.function("SUM", Long.class, m.get("age"));
cq.select(function);
```

ì—¬ê¸°ì„œëŠ” ì „ì²´ íšŒì›ì˜ ë‚˜ì´ í•©ì„ êµ¬í–ˆë‹¤. â€œSUMâ€ ëŒ€ì‹ ì— ì›í•˜ëŠ” ë„¤ì´í‹°ë¸Œ SQL í•¨ìˆ˜ë¥¼ ì…ë ¥í•˜ë©´ ëœë‹¤.

(ì°¸ê³ ) JPQLì—ì„œ ì„¤ëª…í–ˆë“¯ì´ í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ëŠ” ë°©ì–¸ì— ì‚¬ìš©ì ì •ì˜ SQL í•¨ìˆ˜ë¥¼ ë“±ë¡í•´ì—¬ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

### ë™ì  ì¿¼ë¦¬

ë‹¤ì–‘í•œ ê²€ìƒ‰ ì¡°ê°„ì— ë”°ë¼ ì‹¤í–‰ ì‹œì ì— ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ë™ì  ì¿¼ë¦¬ë¼ í•œë‹¤. ë™ì  ì¿¼ë¦¬ëŠ” ë¬¸ì ê¸°ë°˜ì¸ JPQL ë³´ë‹¤ëŠ” ì½”ë“œ ê¸°ë°˜ì¸ Criteriaë¡œ ì‘ì„± í•˜ëŠ” ê²ƒì´ ë” í¸ë¦¬í•˜ë‹¤. 

ì“°ì§€ë§ˆë¼ ê·¸ëƒ¥ ã…‹ã…‹

### Criteria ë©”íƒ€ ëª¨ë¸ API

CriteriaëŠ” ì½”ë“œ ê¸°ë°˜ì´ë¯€ë¡œ ì»´íŒŒì¼ ì‹œì ì— ì˜¤ë¥˜ë¥¼ ë°œê²¬ í•   ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ m.get(â€ageâ€)ì—ì„œ ageëŠ” ë¬¸ìë‹¤. ageëŒ€ì‹ ì— ë‹¤ë¥¸ ë¬¸ìë¥¼ ì˜ëª» ì ì–´ë„ ì»´íŒŒì¼ ì‹œì ì— ì—ëŸ¬ë¥¼ ë°œê²¬í•˜ì§€ ëª»í•œë‹¤. ë”°ë¼ì„œ ì™„ì „í•œ ì½”ë“œ ê¸°ë°˜ì´ë¼ í•  ìˆ˜ ì—†ë‹¤. ì´ëŸ° ë¶€ë¶„ê¹Œì§€ ì½”ë“œë¡œ ì‘ì„±í•˜ë ¤ë©´ ë©”íƒ€ ëª¨ë¸ APIë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ë©”íƒ€ ëª¨ë¸ APIë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € ë©”íƒ€ ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤.

## QueryDSL

Criteriaê°€ ë§ì€ ì¥ì ì„ ì œê³µí•˜ì§€ë§Œ ë„ˆë¬´ ì–´ë µë‹¤ëŠ” í° ë‹¨ì ì„ ê°€ì§„ë‹¤. ì´ë¥¼ ëŒ€ì²´ í•  ìˆ˜ ìˆëŠ” ê²ƒì´ QueryDSLì´ë‹¤. 

### QueryDSL ì„¤ì •

- querydsl-jpa : QueryDSL JPA ë¼ì´ë¸ŒëŸ¬ë¦¬
- querydsl-apt: ì¿¼ë¦¬íƒ€ì…(Q)ì„ ìƒì„±í•  ë•Œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
